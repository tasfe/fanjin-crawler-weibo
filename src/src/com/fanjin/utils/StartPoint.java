package com.fanjin.utils;

/**
 * 存放上一次抓取的终点,作为这一次抓取的起点，采用单例模式
 * @author 砍柴的大叔
 */
import java.util.*;
import java.io.*;

public class StartPoint
{
    private Properties		 p = null;
    private String     		 fileName = null; 
    private FileInputStream  myin;
    private FileOutputStream myout;
    
   
    public StartPoint(String fileName) 
    {
		this.fileName = fileName;
		p = new Properties();
		
		File file= new File(fileName);
		try 
		{
			//如果文件不存在 创建
			if(!file.exists())
				file.createNewFile();
			
			myin  = new FileInputStream(file);
			//myout = new FileOutputStream(file);
		    p.load(myin);
		   
		}
		catch (IOException e) 
		{
			e.printStackTrace();
			return ;
		}
	}
    

    /**
     * 把一个值存入文件
     * @param key
     * @param value
     * @return
     */
    public boolean save(String key,String value)
    {
    	p.setProperty(key, value);
    	try 
    	{
    		File file= new File(fileName);
    		myout = new FileOutputStream(file);
			p.store(myout, fileName);
			myout.flush();
		}
    	catch (IOException e) 
		{
			e.printStackTrace();
			return false;
		}
    	
    	return true;
    }
    
    /**
     * 从文件读取一个值
     * @param key
     * @return key对应的值
     */
    public String get(String key)
    {
    	String value = null;

    	try 
    	{
    		 value = p.getProperty(key);
		}
    	catch (Exception e) 
		{
			e.printStackTrace();
			return null;
		}
    	
    	return value;
    }
   
   public static void main(String [] args)
   {
       StartPoint sp = new StartPoint("thread1.ini");
	   System.out.println(sp.get("id"));

   }
    
}
